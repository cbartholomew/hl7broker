/*
Deployment script for SHIELDS_INTERFACE_BROKER

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "SHIELDS_INTERFACE_BROKER"
:setvar DefaultFilePrefix "SHIELDS_INTERFACE_BROKER"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Creating [InterfaceBrokerUser]...';


GO
CREATE USER [InterfaceBrokerUser] FOR LOGIN [InterfaceBrokerUser];


GO
PRINT N'Creating [ReadingRadPooledUser]...';


GO
CREATE USER [ReadingRadPooledUser] FOR LOGIN [ReadingRadPooledUser];


GO
PRINT N'Creating <unnamed>...';


GO
EXECUTE sp_addrolemember @rolename = N'db_datareader', @membername = N'ReadingRadPooledUser';


GO
PRINT N'Creating <unnamed>...';


GO
EXECUTE sp_addrolemember @rolename = N'db_datareader', @membername = N'InterfaceBrokerUser';


GO
PRINT N'Creating <unnamed>...';


GO
EXECUTE sp_addrolemember @rolename = N'db_datawriter', @membername = N'ReadingRadPooledUser';


GO
PRINT N'Creating <unnamed>...';


GO
EXECUTE sp_addrolemember @rolename = N'db_datawriter', @membername = N'InterfaceBrokerUser';


GO
PRINT N'Creating [SHIELDS_INTERFACE_BROKER]...';


GO
CREATE FULLTEXT CATALOG [SHIELDS_INTERFACE_BROKER]
    WITH ACCENT_SENSITIVITY = ON
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [dbo].[APP_ACKNOWLEDGEMENT]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[APP_ACKNOWLEDGEMENT] (
    [ID]                      BIGINT   IDENTITY (1, 1) NOT NULL,
    [MESSAGE_ID]              BIGINT   NOT NULL,
    [ACKNOWLEDGEMENT_TYPE_ID] INT      NOT NULL,
    [RAW]                     TEXT     NOT NULL,
    [CREATED_DTTM]            DATETIME NOT NULL
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[APP_ACKNOWLEDGEMENT_TYPE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[APP_ACKNOWLEDGEMENT_TYPE] (
    [ID]          INT            IDENTITY (1, 1) NOT NULL,
    [TYPE]        NVARCHAR (50)  NOT NULL,
    [DESCRIPTION] NVARCHAR (100) NULL
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[APP_BROKER]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[APP_BROKER] (
    [ID]                  INT      IDENTITY (1, 1) NOT NULL,
    [INTERFACE_STATUS_ID] INT      NOT NULL,
    [COMMUNICATION_ID]    INT      NOT NULL,
    [PROCESS_ID]          INT      NOT NULL,
    [LAST_MESSAGE_ID]     BIGINT   NOT NULL,
    [QUEUE_COUNT]         INT      NOT NULL,
    [LAST_MESSAGE_DTTM]   DATETIME NULL,
    CONSTRAINT [PK_APP_BROKER] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[APP_MESSAGE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[APP_MESSAGE] (
    [ID]                         BIGINT IDENTITY (1, 1) NOT NULL,
    [MESSAGE_HEADER_INSTANCE_ID] BIGINT NULL,
    [HL7_RAW]                    TEXT   NULL,
    CONSTRAINT [PK_APP_MESSAGE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[APP_MESSAGE_HEADER_INSTANCE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[APP_MESSAGE_HEADER_INSTANCE] (
    [ID]                     BIGINT        IDENTITY (1, 1) NOT NULL,
    [SENDING_APPLICATION]    NVARCHAR (50) NULL,
    [RECEIVING_APPLICATION]  NVARCHAR (50) NULL,
    [SENDING_FACILITY]       NVARCHAR (50) NULL,
    [RECEIVING_FACILTIY]     NVARCHAR (50) NULL,
    [MESSAGE_DTTM]           NVARCHAR (50) NULL,
    [MESSAGE_CONTROL_ID]     NVARCHAR (50) NULL,
    [MESSAGE_TYPE]           NVARCHAR (50) NULL,
    [VERSION_ID]             NVARCHAR (50) NULL,
    [APPLICATION_ACK_TYPE]   NVARCHAR (50) NULL,
    [ACCEPT_ACK_TYPE]        NVARCHAR (50) NULL,
    [ORDER_CONTROL_CODE]     NVARCHAR (50) NULL,
    [PATIENT_IDENTIFIER]     NVARCHAR (50) NULL,
    [PROCESSED]              BIT           NULL,
    [PROCESSED_DTTM]         DATETIME      NULL,
    [PROCESSED_COUNT]        INT           NULL,
    [PENDING_REPROCESS_DTTM] DATETIME      NULL,
    [CREATED_DTTM]           DATETIME      NULL,
    CONSTRAINT [PK_APP_MESSAGE_HEADER_INSTANCE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[APP_MESSAGE_LOG]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[APP_MESSAGE_LOG] (
    [ID]                  BIGINT   IDENTITY (1, 1) NOT NULL,
    [MESSAGE_ID]          BIGINT   NOT NULL,
    [MESSAGE_LOG_TYPE_ID] INT      NOT NULL,
    [CREATED_DTTM]        DATETIME NOT NULL
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[APP_MESSAGE_LOG_TYPE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[APP_MESSAGE_LOG_TYPE] (
    [ID]   INT           IDENTITY (1, 1) NOT NULL,
    [TYPE] NVARCHAR (50) NOT NULL
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_APPLICATION]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_APPLICATION] (
    [ID]          BIGINT        IDENTITY (1, 1) NOT NULL,
    [NAME]        VARCHAR (200) NULL,
    [DESCRIPTION] VARCHAR (200) NULL,
    CONSTRAINT [PK_SYS_APPLICATION] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_APPLICATION_SETTING]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_APPLICATION_SETTING] (
    [ID]               INT IDENTITY (1, 1) NOT NULL,
    [APPLICATION_ID]   INT NOT NULL,
    [COMMUNICATION_ID] INT NOT NULL,
    [DISABLED]         BIT NOT NULL,
    [AUTOSTART]        BIT NOT NULL
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_COLUMN_SET]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_COLUMN_SET] (
    [ID]                        BIGINT        IDENTITY (1, 1) NOT NULL,
    [DATABASE_TABLE_ID]         BIGINT        NULL,
    [NAME]                      VARCHAR (200) NULL,
    [IS_PRIMARY_KEY]            BIT           NOT NULL,
    [MESSAGE_GROUP_INSTANCE_ID] BIGINT        NULL,
    [COLUMN_DATA_TYPE]          VARCHAR (50)  NULL,
    CONSTRAINT [PK_SYS_COLUMN_SET] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_COMMUNICATION]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_COMMUNICATION] (
    [ID]                    BIGINT IDENTITY (1, 1) NOT NULL,
    [DIRECTION_TYPE_ID]     BIGINT NULL,
    [COMMUNICATION_TYPE_ID] BIGINT NULL,
    [APPLICATION_ID]        BIGINT NULL,
    CONSTRAINT [PK_SYS_COMMUNICATION] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_COMMUNICATION_TYPE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_COMMUNICATION_TYPE] (
    [ID]   BIGINT        IDENTITY (1, 1) NOT NULL,
    [NAME] NVARCHAR (50) NULL,
    CONSTRAINT [PK_SYS_COMMUNICATION_TYPE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_CREDENTIAL]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_CREDENTIAL] (
    [ID]                 BIGINT         IDENTITY (1, 1) NOT NULL,
    [CREDENTIAL_TYPE_ID] BIGINT         NULL,
    [USERNAME]           NVARCHAR (255) NULL,
    [PASSWORD]           NVARCHAR (255) NULL,
    CONSTRAINT [PK_SYS_CREDENTIAL] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_CREDENTIAL_TYPE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_CREDENTIAL_TYPE] (
    [ID]   BIGINT         IDENTITY (1, 1) NOT NULL,
    [NAME] NVARCHAR (255) NULL,
    CONSTRAINT [PK_SYS_CREDENTIAL_TYPE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_DATABASE_INSTANCE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_DATABASE_INSTANCE] (
    [ID]               BIGINT         IDENTITY (1, 1) NOT NULL,
    [COMMUNICATION_ID] BIGINT         NULL,
    [CREDENTIAL_ID]    BIGINT         NULL,
    [NAME]             NVARCHAR (255) NULL,
    [SERVER]           NVARCHAR (255) NULL,
    [IP_ADDRESS]       NVARCHAR (255) NULL,
    CONSTRAINT [PK_SYS_DATABASE_INSTANCE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_DATABASE_TABLE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_DATABASE_TABLE] (
    [ID]                   BIGINT        IDENTITY (1, 1) NOT NULL,
    [DATABASE_INSTANCE_ID] BIGINT        NULL,
    [NAME]                 VARCHAR (100) NULL,
    CONSTRAINT [PK_SYS_DATABASE_TABLE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_DATABASE_TABLE_RELATION]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_DATABASE_TABLE_RELATION] (
    [ID]                       BIGINT IDENTITY (1, 1) NOT NULL,
    [SOURCE_DATABASE_TABLE_ID] BIGINT NOT NULL,
    [TARGET_DATABASE_TABLE_ID] BIGINT NOT NULL,
    [REQUIRES_IDENTITY]        BIT    NOT NULL
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_DIRECTION_TYPE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_DIRECTION_TYPE] (
    [ID]   BIGINT        IDENTITY (1, 1) NOT NULL,
    [NAME] NVARCHAR (50) NULL,
    CONSTRAINT [PK_SYS_DIRECTION_TYPE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_INTERFACE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_INTERFACE] (
    [ID]               BIGINT         IDENTITY (1, 1) NOT NULL,
    [COMMUNICATION_ID] BIGINT         NULL,
    [CREDENTIAL_ID]    BIGINT         NULL,
    [IP_ADDRESS]       NVARCHAR (255) NULL,
    [PORT]             NVARCHAR (255) NULL,
    [MAX_CONNECTIONS]  INT            NULL,
    CONSTRAINT [PK_SYS_INTERFACE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_INTERFACE_STATUS]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_INTERFACE_STATUS] (
    [ID]           INT            IDENTITY (1, 1) NOT NULL,
    [NAME]         NVARCHAR (100) NOT NULL,
    [STATUS_COLOR] NVARCHAR (100) NOT NULL,
    CONSTRAINT [PK_APP_INTERFACE_STATUS] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_MESSAGE_GROUP]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_MESSAGE_GROUP] (
    [ID]                        BIGINT IDENTITY (1, 1) NOT NULL,
    [MESSAGE_GROUP_INSTANCE_ID] BIGINT NULL,
    [MESSAGE_PART_ID]           BIGINT NOT NULL,
    [POSITION]                  INT    NULL,
    CONSTRAINT [PK_SYS_MESSAGE_PART_VALUE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_MESSAGE_GROUP_INSTANCE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_MESSAGE_GROUP_INSTANCE] (
    [ID]              BIGINT         IDENTITY (1, 1) NOT NULL,
    [MESSAGE_TYPE_ID] BIGINT         NULL,
    [SEGMENT_TYPE_ID] BIGINT         NULL,
    [CREATED_DTTM]    DATETIME       NULL,
    [UPDATED_DTTM]    DATETIME       NULL,
    [DESCRIPTION]     NVARCHAR (255) NULL,
    CONSTRAINT [PK_SYS_MESSAGE_GROUP_INSTANCE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_MESSAGE_PART]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_MESSAGE_PART] (
    [ID]        BIGINT         IDENTITY (1, 1) NOT NULL,
    [NAME]      NVARCHAR (255) NULL,
    [DELIMITER] CHAR (2)       NULL,
    CONSTRAINT [PK_SYS_MESSAGE_PART] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_MESSAGE_TYPE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_MESSAGE_TYPE] (
    [ID]   BIGINT         IDENTITY (1, 1) NOT NULL,
    [NAME] NVARCHAR (255) NULL,
    CONSTRAINT [PK_SYS_MESSAGE_TYPE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_SEGMENT_TYPE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_SEGMENT_TYPE] (
    [ID]   BIGINT         IDENTITY (1, 1) NOT NULL,
    [NAME] NVARCHAR (255) NULL,
    CONSTRAINT [PK_SYS_SEGMENT_TYPE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_WEBSERVICE_INSTANCE]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_WEBSERVICE_INSTANCE] (
    [ID]               BIGINT         IDENTITY (1, 1) NOT NULL,
    [COMMUNICATION_ID] BIGINT         NULL,
    [CREDENTIAL_ID]    BIGINT         NULL,
    [NAME]             NVARCHAR (255) NULL,
    [SERVER]           NVARCHAR (255) NULL,
    [IP_ADDRESS]       NVARCHAR (255) NULL,
    CONSTRAINT [PK_SYS_WEBSERVICE_INSTANCE] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_WEBSERVICE_OBJECT]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_WEBSERVICE_OBJECT] (
    [ID]                     BIGINT        IDENTITY (1, 1) NOT NULL,
    [WEBSERVICE_INSTANCE_ID] BIGINT        NULL,
    [NAME]                   VARCHAR (100) NULL,
    CONSTRAINT [PK_SYS_WEBSERVICE_OBJECT] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[SYS_WEBSERVICE_PROPERTY_SET]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[SYS_WEBSERVICE_PROPERTY_SET] (
    [ID]                        BIGINT        IDENTITY (1, 1) NOT NULL,
    [WEBSERVICE_OBJECT_ID]      BIGINT        NULL,
    [NAME]                      VARCHAR (200) NULL,
    [MESSAGE_GROUP_INSTANCE_ID] BIGINT        NULL,
    [COLUMN_DATA_TYPE]          VARCHAR (50)  NULL,
    CONSTRAINT [PK_SYS_WEBSERVICE_PROPERTY_SET] PRIMARY KEY CLUSTERED ([ID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating DF_APP_BROKER_PROCESS_ID...';


GO
ALTER TABLE [dbo].[APP_BROKER]
    ADD CONSTRAINT [DF_APP_BROKER_PROCESS_ID] DEFAULT ((0)) FOR [PROCESS_ID];


GO
PRINT N'Creating DF_APP_BROKER_QUEUE_COUNT...';


GO
ALTER TABLE [dbo].[APP_BROKER]
    ADD CONSTRAINT [DF_APP_BROKER_QUEUE_COUNT] DEFAULT ((0)) FOR [QUEUE_COUNT];


GO
PRINT N'Creating DF_MESSAGE_HEADER_INSTANCE_PROCSSED...';


GO
ALTER TABLE [dbo].[APP_MESSAGE_HEADER_INSTANCE]
    ADD CONSTRAINT [DF_MESSAGE_HEADER_INSTANCE_PROCSSED] DEFAULT ((0)) FOR [PROCESSED];


GO
PRINT N'Creating DF_APP_MESSAGE_HEADER_INSTANCE_PROCESSED_COUNT...';


GO
ALTER TABLE [dbo].[APP_MESSAGE_HEADER_INSTANCE]
    ADD CONSTRAINT [DF_APP_MESSAGE_HEADER_INSTANCE_PROCESSED_COUNT] DEFAULT ((0)) FOR [PROCESSED_COUNT];


GO
PRINT N'Creating DF_SYS_APPLICATION_SETTING_COMMUNICATION_ID...';


GO
ALTER TABLE [dbo].[SYS_APPLICATION_SETTING]
    ADD CONSTRAINT [DF_SYS_APPLICATION_SETTING_COMMUNICATION_ID] DEFAULT ((0)) FOR [COMMUNICATION_ID];


GO
PRINT N'Creating DF_SYS_APPLICATION_SETTINGS_DISABLED...';


GO
ALTER TABLE [dbo].[SYS_APPLICATION_SETTING]
    ADD CONSTRAINT [DF_SYS_APPLICATION_SETTINGS_DISABLED] DEFAULT ((0)) FOR [DISABLED];


GO
PRINT N'Creating DF_SYS_APPLICATION_SETTINGS_AUTOSTART...';


GO
ALTER TABLE [dbo].[SYS_APPLICATION_SETTING]
    ADD CONSTRAINT [DF_SYS_APPLICATION_SETTINGS_AUTOSTART] DEFAULT ((0)) FOR [AUTOSTART];


GO
PRINT N'Creating Full-text Index on [dbo].[APP_MESSAGE_HEADER_INSTANCE]...';


GO
CREATE FULLTEXT INDEX ON [dbo].[APP_MESSAGE_HEADER_INSTANCE]
    ([MESSAGE_CONTROL_ID] LANGUAGE 1033, [PATIENT_IDENTIFIER] LANGUAGE 1033)
    KEY INDEX [PK_APP_MESSAGE_HEADER_INSTANCE]
    ON [SHIELDS_INTERFACE_BROKER]
    WITH CHANGE_TRACKING OFF;


GO
PRINT N'Creating FK_APP_MESSAGE_APP_MESSAGE_HEADER_INSTANCE...';


GO
ALTER TABLE [dbo].[APP_MESSAGE] WITH NOCHECK
    ADD CONSTRAINT [FK_APP_MESSAGE_APP_MESSAGE_HEADER_INSTANCE] FOREIGN KEY ([MESSAGE_HEADER_INSTANCE_ID]) REFERENCES [dbo].[APP_MESSAGE_HEADER_INSTANCE] ([ID]);


GO
PRINT N'Creating FK_SYS_COLUMN_SET_SYS_DATABASE_TABLE...';


GO
ALTER TABLE [dbo].[SYS_COLUMN_SET] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_COLUMN_SET_SYS_DATABASE_TABLE] FOREIGN KEY ([DATABASE_TABLE_ID]) REFERENCES [dbo].[SYS_DATABASE_TABLE] ([ID]);


GO
PRINT N'Creating FK_SYS_COLUMN_SET_SYS_MESSAGE_GROUP_INSTANCE...';


GO
ALTER TABLE [dbo].[SYS_COLUMN_SET] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_COLUMN_SET_SYS_MESSAGE_GROUP_INSTANCE] FOREIGN KEY ([MESSAGE_GROUP_INSTANCE_ID]) REFERENCES [dbo].[SYS_MESSAGE_GROUP_INSTANCE] ([ID]);


GO
PRINT N'Creating FK_SYS_COMMUNICATION_SYS_APPLICATION...';


GO
ALTER TABLE [dbo].[SYS_COMMUNICATION] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_COMMUNICATION_SYS_APPLICATION] FOREIGN KEY ([APPLICATION_ID]) REFERENCES [dbo].[SYS_APPLICATION] ([ID]);


GO
PRINT N'Creating FK_SYS_COMMUNICATION_SYS_COMMUNICATION_TYPE...';


GO
ALTER TABLE [dbo].[SYS_COMMUNICATION] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_COMMUNICATION_SYS_COMMUNICATION_TYPE] FOREIGN KEY ([COMMUNICATION_TYPE_ID]) REFERENCES [dbo].[SYS_COMMUNICATION_TYPE] ([ID]);


GO
PRINT N'Creating FK_SYS_COMMUNICATION_SYS_DIRECTION_TYPE...';


GO
ALTER TABLE [dbo].[SYS_COMMUNICATION] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_COMMUNICATION_SYS_DIRECTION_TYPE] FOREIGN KEY ([DIRECTION_TYPE_ID]) REFERENCES [dbo].[SYS_DIRECTION_TYPE] ([ID]);


GO
PRINT N'Creating FK_SYS_CREDENTIAL_SYS_CREDENTIAL_TYPE...';


GO
ALTER TABLE [dbo].[SYS_CREDENTIAL] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_CREDENTIAL_SYS_CREDENTIAL_TYPE] FOREIGN KEY ([CREDENTIAL_TYPE_ID]) REFERENCES [dbo].[SYS_CREDENTIAL_TYPE] ([ID]);


GO
PRINT N'Creating FK_SYS_DATABASE_INSTANCE_SYS_CREDENTIAL...';


GO
ALTER TABLE [dbo].[SYS_DATABASE_INSTANCE] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_DATABASE_INSTANCE_SYS_CREDENTIAL] FOREIGN KEY ([CREDENTIAL_ID]) REFERENCES [dbo].[SYS_CREDENTIAL] ([ID]);


GO
PRINT N'Creating FK_SYS_DATABASE_TABLE_SYS_DATABASE_INSTANCE...';


GO
ALTER TABLE [dbo].[SYS_DATABASE_TABLE] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_DATABASE_TABLE_SYS_DATABASE_INSTANCE] FOREIGN KEY ([DATABASE_INSTANCE_ID]) REFERENCES [dbo].[SYS_DATABASE_INSTANCE] ([ID]);


GO
PRINT N'Creating FK_SYS_DATABASE_TABLE_RELATION_SYS_DATABASE_TABLE...';


GO
ALTER TABLE [dbo].[SYS_DATABASE_TABLE_RELATION] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_DATABASE_TABLE_RELATION_SYS_DATABASE_TABLE] FOREIGN KEY ([SOURCE_DATABASE_TABLE_ID]) REFERENCES [dbo].[SYS_DATABASE_TABLE] ([ID]);


GO
PRINT N'Creating FK_SYS_DATABASE_TABLE_RELATION_SYS_DATABASE_TABLE1...';


GO
ALTER TABLE [dbo].[SYS_DATABASE_TABLE_RELATION] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_DATABASE_TABLE_RELATION_SYS_DATABASE_TABLE1] FOREIGN KEY ([TARGET_DATABASE_TABLE_ID]) REFERENCES [dbo].[SYS_DATABASE_TABLE] ([ID]);


GO
PRINT N'Creating FK_SYS_INTERFACE_SYS_CREDENTIAL...';


GO
ALTER TABLE [dbo].[SYS_INTERFACE] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_INTERFACE_SYS_CREDENTIAL] FOREIGN KEY ([CREDENTIAL_ID]) REFERENCES [dbo].[SYS_CREDENTIAL] ([ID]);


GO
PRINT N'Creating FK_SYS_MESSAGE_GROUP_SYS_MESSAGE_GROUP_INSTANCE...';


GO
ALTER TABLE [dbo].[SYS_MESSAGE_GROUP] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_MESSAGE_GROUP_SYS_MESSAGE_GROUP_INSTANCE] FOREIGN KEY ([MESSAGE_GROUP_INSTANCE_ID]) REFERENCES [dbo].[SYS_MESSAGE_GROUP_INSTANCE] ([ID]);


GO
PRINT N'Creating FK_SYS_MESSAGE_GROUP_SYS_MESSAGE_PART...';


GO
ALTER TABLE [dbo].[SYS_MESSAGE_GROUP] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_MESSAGE_GROUP_SYS_MESSAGE_PART] FOREIGN KEY ([MESSAGE_PART_ID]) REFERENCES [dbo].[SYS_MESSAGE_PART] ([ID]);


GO
PRINT N'Creating FK_SYS_MESSAGE_GROUP_INSTANCE_SYS_MESSAGE_TYPE...';


GO
ALTER TABLE [dbo].[SYS_MESSAGE_GROUP_INSTANCE] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_MESSAGE_GROUP_INSTANCE_SYS_MESSAGE_TYPE] FOREIGN KEY ([MESSAGE_TYPE_ID]) REFERENCES [dbo].[SYS_MESSAGE_TYPE] ([ID]);


GO
PRINT N'Creating FK_SYS_MESSAGE_GROUP_INSTANCE_SYS_SEGMENT_TYPE...';


GO
ALTER TABLE [dbo].[SYS_MESSAGE_GROUP_INSTANCE] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_MESSAGE_GROUP_INSTANCE_SYS_SEGMENT_TYPE] FOREIGN KEY ([SEGMENT_TYPE_ID]) REFERENCES [dbo].[SYS_SEGMENT_TYPE] ([ID]);


GO
PRINT N'Creating FK_SYS_WEBSERVICE_INSTANCE_SYS_CREDENTIAL...';


GO
ALTER TABLE [dbo].[SYS_WEBSERVICE_INSTANCE] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_WEBSERVICE_INSTANCE_SYS_CREDENTIAL] FOREIGN KEY ([CREDENTIAL_ID]) REFERENCES [dbo].[SYS_CREDENTIAL] ([ID]);


GO
PRINT N'Creating FK_SYS_WEBSERVICE_OBJECT_SYS_WEBSERVICE_INSTANCE...';


GO
ALTER TABLE [dbo].[SYS_WEBSERVICE_OBJECT] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_WEBSERVICE_OBJECT_SYS_WEBSERVICE_INSTANCE] FOREIGN KEY ([WEBSERVICE_INSTANCE_ID]) REFERENCES [dbo].[SYS_WEBSERVICE_INSTANCE] ([ID]);


GO
PRINT N'Creating FK_SYS_WEBSERVICE_PROPERTY_SET_SYS_MESSAGE_GROUP_INSTANCE...';


GO
ALTER TABLE [dbo].[SYS_WEBSERVICE_PROPERTY_SET] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_WEBSERVICE_PROPERTY_SET_SYS_MESSAGE_GROUP_INSTANCE] FOREIGN KEY ([MESSAGE_GROUP_INSTANCE_ID]) REFERENCES [dbo].[SYS_MESSAGE_GROUP_INSTANCE] ([ID]);


GO
PRINT N'Creating FK_SYS_WEBSERVICE_PROPERTY_SET_SYS_WEBSERVICE_OBJECT...';


GO
ALTER TABLE [dbo].[SYS_WEBSERVICE_PROPERTY_SET] WITH NOCHECK
    ADD CONSTRAINT [FK_SYS_WEBSERVICE_PROPERTY_SET_SYS_WEBSERVICE_OBJECT] FOREIGN KEY ([WEBSERVICE_OBJECT_ID]) REFERENCES [dbo].[SYS_WEBSERVICE_OBJECT] ([ID]);


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetAppBrokerMainList]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetAppBrokerMainList
AS
SELECT        B.ID AS BROKER_ID, A.DESCRIPTION AS APPLICATION_DESCRIPTION, A.NAME AS APPLICATION_NAME, B.QUEUE_COUNT AS BROKER_QUEUE_COUNT, 
                         S.NAME AS INTERFACE_STATUS_NAME, S.STATUS_COLOR AS INTERFACE_STATUS_COLOR, CT.NAME AS COMMUNICATION_TYPE_NAME, 
                         DT.NAME AS DIRECTION_TYPE_NAME, B.PROCESS_ID AS BROKER_PROCESS_ID, B.LAST_MESSAGE_DTTM AS BROKER_LAST_MESSAGE_DTTM, 
                         B.LAST_MESSAGE_ID AS BROKER_LAST_MESSAGE_ID, M.HL7_RAW AS MESSAGE_HL7_RAW, M.MESSAGE_HEADER_INSTANCE_ID, CO.DIRECTION_TYPE_ID, 
                         CO.COMMUNICATION_TYPE_ID, B.COMMUNICATION_ID AS BROKER_COMMUNICATION_ID, B.INTERFACE_STATUS_ID AS BROKER_INTERFACE_STATUS_ID, 
                         CO.APPLICATION_ID AS COMMUNICATION_APPLICATION_ID
FROM            dbo.APP_BROKER AS B WITH (NOLOCK) INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO WITH (NOLOCK) ON CO.ID = B.COMMUNICATION_ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS CT WITH (NOLOCK) ON CT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_APPLICATION AS A WITH (NOLOCK) ON A.ID = CO.APPLICATION_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DT WITH (NOLOCK) ON DT.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_INTERFACE_STATUS AS S WITH (NOLOCK) ON S.ID = B.INTERFACE_STATUS_ID LEFT OUTER JOIN
                         dbo.APP_MESSAGE AS M WITH (NOLOCK) ON M.ID = B.LAST_MESSAGE_ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationConfiguration]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetApplicationConfiguration
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, C.ID AS COMMUNICATION_ID, 
                         CT.NAME AS COMMUNICATION_TYPE_NAME, DT.NAME AS DIRECTION_TYPE_NAME, S.AUTOSTART AS APP_SETTING_AUTOSTART, 
                         S.DISABLED AS APP_SETTING_DISABLED, S.ID AS APP_SETTING_ID
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS C ON C.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS CT ON CT.ID = C.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DT ON DT.ID = C.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_APPLICATION_SETTING AS S ON S.COMMUNICATION_ID = C.ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationDatabasesConfig]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetApplicationDatabasesConfig
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, DI.NAME AS DATABASE_NAME, 
                         DI.IP_ADDRESS AS DATABASE_IP_ADDRESS, DI.SERVER AS DATABASE_SERVER, CT.NAME AS CREDENTIAL_TYPE, C.ID AS CREDENTIAL_ID, 
                         C.USERNAME AS CREDENTIAL_USERNAME, C.PASSWORD AS CREDENTIAL_PASSWORD, COT.NAME AS COMMUNICATION_TYPE_NAME, 
                         CO.COMMUNICATION_TYPE_ID AS COMMUNICATION_COMMUNICATION_TYPE_ID, CO.APPLICATION_ID AS COMMUNICATION_APPLICATION_ID, 
                         CO.DIRECTION_TYPE_ID AS COMMUNICATION_DIRECTION_TYPE_ID, DT.NAME AS DIRECTION_TYPE_NAME, CO.ID AS COMMUNICATION_ID, 
                         DI.ID AS DATABASE_INSTANCE_ID, S.AUTOSTART AS APP_SETTING_AUTOSTART, S.DISABLED AS APP_SETTING_DISABLED, S.ID AS APP_SETTING_ID
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO ON CO.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_DATABASE_INSTANCE AS DI ON CO.ID = DI.COMMUNICATION_ID INNER JOIN
                         dbo.SYS_CREDENTIAL AS C ON C.ID = DI.CREDENTIAL_ID INNER JOIN
                         dbo.SYS_CREDENTIAL_TYPE AS CT ON CT.ID = C.CREDENTIAL_TYPE_ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS COT ON COT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DT ON DT.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_APPLICATION_SETTING AS S ON S.COMMUNICATION_ID = CO.ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationInterfaceConfig]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetApplicationInterfaceConfig
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, I.IP_ADDRESS AS INTERFACE_IP_ADDRESS, 
                         I.PORT AS INTERFACE_PORT, I.MAX_CONNECTIONS AS INTERFACE_MAX_CONNECTIONS, CT.NAME AS CREDENTIAL_TYPE, C.USERNAME, C.PASSWORD, 
                         CO.ID AS COMMUNICATION_ID, CO.DIRECTION_TYPE_ID AS COMMUNICATION_DIRECTION_TYPE_ID, 
                         CO.COMMUNICATION_TYPE_ID AS COMMUNICATION_COMMUNICATION_TYPE_ID, CO.APPLICATION_ID AS COMMUNICATION_APPLICATION_ID, 
                         COT.NAME AS COMMUNICATION_TYPE_NAME, DT.NAME AS DIRECTION_TYPE_NAME, S.AUTOSTART AS APP_SETTING_AUTOSTART, 
                         S.DISABLED AS APP_SETTING_DISABLED, S.ID AS APP_SETTING_ID
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO ON CO.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_INTERFACE AS I ON I.COMMUNICATION_ID = CO.ID INNER JOIN
                         dbo.SYS_CREDENTIAL AS C ON C.ID = I.CREDENTIAL_ID INNER JOIN
                         dbo.SYS_CREDENTIAL_TYPE AS CT ON CT.ID = C.CREDENTIAL_TYPE_ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS COT ON COT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DT ON DT.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_APPLICATION_SETTING AS S ON S.COMMUNICATION_ID = CO.ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationWebserviceConfig]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetApplicationWebserviceConfig
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, WI.NAME AS WEBSERVICE_NAME, 
                         WI.IP_ADDRESS AS WEBSERVICE_IP_ADDRESS, WI.SERVER AS WEBSERVICE_SERVER, CT.NAME AS CREDENTIAL_TYPE, C.ID AS CREDENTIAL_ID, 
                         C.USERNAME AS CREDENTIAL_USERNAME, C.PASSWORD AS CREDENTIAL_PASSWORD, COT.NAME AS COMMUNICATION_TYPE_NAME, 
                         CO.COMMUNICATION_TYPE_ID AS COMMUNICATION_COMMUNICATION_TYPE_ID, CO.APPLICATION_ID AS COMMUNICATION_APPLICATION_ID, 
                         CO.DIRECTION_TYPE_ID AS COMMUNICATION_DIRECTION_TYPE_ID, DT.NAME AS DIRECTION_TYPE_NAME, CO.ID AS COMMUNICATION_ID, 
                         WI.ID AS WEBSERVICE_INSTANCE_ID, S.AUTOSTART AS APP_SETTING_AUTOSTART, S.DISABLED AS APP_SETTING_DISABLED, S.ID AS APP_SETTING_ID
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO ON CO.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_WEBSERVICE_INSTANCE AS WI ON CO.ID = WI.COMMUNICATION_ID INNER JOIN
                         dbo.SYS_CREDENTIAL AS C ON C.ID = WI.CREDENTIAL_ID INNER JOIN
                         dbo.SYS_CREDENTIAL_TYPE AS CT ON CT.ID = C.CREDENTIAL_TYPE_ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS COT ON COT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DT ON DT.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_APPLICATION_SETTING AS S ON S.COMMUNICATION_ID = CO.ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseColumns]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetDatabaseColumns
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, CS.NAME AS DATABASE_COLUMN, 
                         CS.MESSAGE_GROUP_INSTANCE_ID AS DATABASE_COLUMN_MESSAGE_GROUP_INSTANCE_ID, CS.COLUMN_DATA_TYPE AS DATABASE_COLUMN_DATA_TYPE, 
                         CS.IS_PRIMARY_KEY AS DATABASE_COLUMN_IS_PRIMARY_KEY, DT.ID AS DATABASE_TABLE_ID, CS.ID AS DATABASE_COLUMN_ID, 
                         DIR.NAME AS DIRECTION_TYPE_NAME, COT.NAME AS COMMUNICATION_TYPE_NAME
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO ON CO.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS COT ON COT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DIR ON DIR.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_DATABASE_INSTANCE AS DI ON CO.ID = DI.COMMUNICATION_ID INNER JOIN
                         dbo.SYS_DATABASE_TABLE AS DT ON DI.ID = DT.DATABASE_INSTANCE_ID INNER JOIN
                         dbo.SYS_COLUMN_SET AS CS ON DT.ID = CS.DATABASE_TABLE_ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseTables]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetDatabaseTables
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, DI.ID AS DATABASE_INSTANCE_ID, DI.NAME AS DATABASE_NAME, 
                         DI.SERVER AS DATABASE_SERVER, DT.ID AS DATABASE_TABLE_ID, DT.NAME AS DATABASE_TABLE, DIR.NAME AS DIRECTION_TYPE_NAME, 
                         COT.NAME AS COMMUNICATION_TYPE_NAME, CO.ID AS COMMUNICATION_ID, DTR.REQUIRES_IDENTITY AS DATABASE_TABLE_RELATION_HAS_DEPENDENCIES, 
                         DTR.ID AS DATABASE_TABLE_RELATION_ID
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO ON CO.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS COT ON COT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DIR ON DIR.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_DATABASE_INSTANCE AS DI ON DI.COMMUNICATION_ID = CO.ID INNER JOIN
                         dbo.SYS_DATABASE_TABLE AS DT ON DI.ID = DT.DATABASE_INSTANCE_ID LEFT OUTER JOIN
                         dbo.SYS_DATABASE_TABLE_RELATION AS DTR ON DTR.TARGET_DATABASE_TABLE_ID = DT.ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetMessageHeaderInstances]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetMessageHeaderInstances
AS
SELECT        MHI.ID AS MHI_ID, MHI.SENDING_APPLICATION AS MHI_SENDING_APPLICATION, MHI.RECEIVING_APPLICATION AS MHI_RECEIVING_APPLICATION, 
                         MHI.SENDING_FACILITY AS MHI_SENDING_FACILITY, MHI.RECEIVING_FACILTIY AS MHI_RECEIVING_FACILTIY, MHI.MESSAGE_DTTM AS MHI_MESSAGE_DTTM, 
                         MHI.MESSAGE_CONTROL_ID AS MHI_MESSAGE_CONTROL_ID, MHI.MESSAGE_TYPE AS MHI_MESSAGE_TYPE, MHI.VERSION_ID AS MHI_VERSION_ID, 
                         MHI.APPLICATION_ACK_TYPE AS MHI_APPLICATION_ACK_TYPE, MHI.ACCEPT_ACK_TYPE AS MHI_ACCEPT_ACK_TYPE, 
                         MHI.ORDER_CONTROL_CODE AS MHI_ORDER_CONTROL_CODE, MHI.PATIENT_IDENTIFIER AS MHI_PATIENT_IDENTIFIER, MHI.PROCESSED AS MHI_PROCESSED, 
                         MHI.PROCESSED_DTTM AS MHI_PROCESSED_DTTM, MHI.PROCESSED_COUNT AS MHI_PROCESSED_COUNT, 
                         MHI.PENDING_REPROCESS_DTTM AS MHI_PENDING_REPROCESS_DTTM, MHI.CREATED_DTTM AS MHI_CREATED_DTTM, M.ID AS MESSAGE_ID, 
                         M.HL7_RAW AS MESSAGE_HL7_RAW
FROM            dbo.APP_MESSAGE_HEADER_INSTANCE AS MHI WITH (NOLOCK) INNER JOIN
                         dbo.APP_MESSAGE AS M WITH (NOLOCK) ON MHI.ID = M.MESSAGE_HEADER_INSTANCE_ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetMessagePosition]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetMessagePosition
AS
SELECT        MGI.DESCRIPTION AS MESSAGE_GROUP_INSTANCE_DESCRIPTION, MT.NAME AS MESSAGE_TYPE_NAME, ST.ID AS SEGMENT_TYPE_ID, 
                         ST.NAME AS SEGMENT_TYPE_NAME, MP.ID, MG.MESSAGE_PART_ID, MP.NAME AS MESSAGE_PART_NAME, MG.POSITION AS MESSAGE_GROUP_POSITION, 
                         MP.DELIMITER AS MESSAGE_PART_DELIMITER, MGI.ID AS MESSAGE_GROUP_INSTANCE_ID
FROM            dbo.SYS_MESSAGE_GROUP_INSTANCE AS MGI INNER JOIN
                         dbo.SYS_SEGMENT_TYPE AS ST ON ST.ID = MGI.SEGMENT_TYPE_ID INNER JOIN
                         dbo.SYS_MESSAGE_TYPE AS MT ON MT.ID = MGI.MESSAGE_TYPE_ID INNER JOIN
                         dbo.SYS_MESSAGE_GROUP AS MG ON MG.MESSAGE_GROUP_INSTANCE_ID = MGI.ID INNER JOIN
                         dbo.SYS_MESSAGE_PART AS MP ON MP.ID = MG.MESSAGE_PART_ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebserviceObjectProperties]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetWebserviceObjectProperties
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, WP.NAME AS WEBSERVICE_PROPERTY, 
                         WP.MESSAGE_GROUP_INSTANCE_ID AS WEBSERVICE_PROPERTY_MESSAGE_GROUP_INSTANCE_ID, 
                         WP.COLUMN_DATA_TYPE AS WEBSERVICE_PROPERTY_COLUMN_DATA_TYPE, WO.ID AS WEBSERVICE_OBJECT_ID, WP.ID AS WEBSERVICE_PROPERTY_ID, 
                         DIR.NAME AS DIRECTION_TYPE_NAME, COT.NAME AS COMMUNICATION_TYPE_NAME
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO ON CO.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS COT ON COT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DIR ON DIR.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_WEBSERVICE_INSTANCE AS WI ON CO.ID = WI.COMMUNICATION_ID INNER JOIN
                         dbo.SYS_WEBSERVICE_OBJECT AS WO ON WI.ID = WO.WEBSERVICE_INSTANCE_ID INNER JOIN
                         dbo.SYS_WEBSERVICE_PROPERTY_SET AS WP ON WO.ID = WP.WEBSERVICE_OBJECT_ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebseviceObjects]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE VIEW dbo.vShieldsHL7Broker_GetWebseviceObjects
AS
SELECT        A.ID AS CONFIG_ID, A.NAME AS CONFIG_NAME, A.DESCRIPTION AS CONFIG_DESCRIPTION, WI.ID AS WEBSERVICE_INSTANCE_ID, 
                         WI.NAME AS WEBSERVICE_NAME, WI.SERVER AS WEBSERVICE_SERVER, WO.ID AS WEBSERVICE_OBJECT_ID, WO.NAME AS WEBSERVICE_OBJECT, 
                         DIR.NAME AS DIRECTION_TYPE_NAME, COT.NAME AS COMMUNICATION_TYPE_NAME, CO.ID AS COMMUNICATION_ID
FROM            dbo.SYS_APPLICATION AS A INNER JOIN
                         dbo.SYS_COMMUNICATION AS CO ON CO.APPLICATION_ID = A.ID INNER JOIN
                         dbo.SYS_COMMUNICATION_TYPE AS COT ON COT.ID = CO.COMMUNICATION_TYPE_ID INNER JOIN
                         dbo.SYS_DIRECTION_TYPE AS DIR ON DIR.ID = CO.DIRECTION_TYPE_ID INNER JOIN
                         dbo.SYS_WEBSERVICE_INSTANCE AS WI ON WI.COMMUNICATION_ID = CO.ID INNER JOIN
                         dbo.SYS_WEBSERVICE_OBJECT AS WO ON WI.ID = WO.WEBSERVICE_INSTANCE_ID
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoAppAcknowledgement]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Bartholomew, Christopher
-- Create date: 04/09
-- Description:	Inserts Into ACK Table
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoAppAcknowledgement] 
	-- Add the parameters for the stored procedure here
	@MESSAGE_ID BIGINT = 0, 
	@ACKNOWLEDGEMENT_TYPE_ID INT = 0,
	@RAW TEXT,
	@CREATED_DTTM NVARCHAR(100)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	INSERT INTO [dbo].[APP_ACKNOWLEDGEMENT]
			   ([MESSAGE_ID]
			   ,[ACKNOWLEDGEMENT_TYPE_ID]
			   ,[RAW]
			   ,[CREATED_DTTM])
		 VALUES
			   (@MESSAGE_ID
			   ,@ACKNOWLEDGEMENT_TYPE_ID
			   ,@RAW
			   ,@CREATED_DTTM)
	
	SELECT * FROM [dbo].[APP_ACKNOWLEDGEMENT] (NOLOCK) WHERE ID = SCOPE_IDENTITY();
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoAppMessageLog]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Bartholomew, Christopher
-- Create date: 04/09
-- Description:	Inserts Into Message Log Table
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoAppMessageLog]
	-- Add the parameters for the stored procedure here
	@MESSAGE_ID BIGINT = 0, 
	@MESSAGE_LOG_TYPE_ID INT = 0,
	@CREATED_DTTM NVARCHAR(100)
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	INSERT INTO [dbo].[APP_MESSAGE_LOG]
			   ([MESSAGE_ID]
			   ,[MESSAGE_LOG_TYPE_ID]
			   ,[CREATED_DTTM])
		 VALUES
			   (@MESSAGE_ID
			   ,@MESSAGE_LOG_TYPE_ID
			   ,@CREATED_DTTM)

	SELECT * FROM [dbo].[APP_MESSAGE_LOG] (NOLOCK) WHERE ID = SCOPE_IDENTITY();
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateAppBroker]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO

-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/16/2012
-- Description:	Insert/Update app broker
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateAppBroker] 
	-- Add the parameters for the stored procedure here           
	@INTERFACE_STATUS_ID  int		= 0,
	@COMMUNICATION_ID     int		= 0,
	@PROCESS_ID           int		= 0,
	@LAST_MESSAGE_ID      int		= 0,
	@QUEUE_COUNT          int		= 0,
	@LAST_MESSAGE_DTTM    datetime	= NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @ID = 0
	BEGIN
		-- Insert statements for procedure here
		INSERT INTO [dbo].[APP_BROKER]
			   ([INTERFACE_STATUS_ID]  
			   ,[COMMUNICATION_ID]     
			   ,[PROCESS_ID]           
			   ,[LAST_MESSAGE_ID]      
			   ,[QUEUE_COUNT]          
			   ,[LAST_MESSAGE_DTTM]    
				)
		 VALUES
			   (@INTERFACE_STATUS_ID
			   ,@COMMUNICATION_ID   
			   ,@PROCESS_ID         
			   ,@LAST_MESSAGE_ID    
			   ,@QUEUE_COUNT        
			   ,@LAST_MESSAGE_DTTM
			   )
		
		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN		
		UPDATE [dbo].[APP_BROKER]
		   SET
			[INTERFACE_STATUS_ID]= @INTERFACE_STATUS_ID
		   ,[COMMUNICATION_ID]   = @COMMUNICATION_ID   
		   ,[PROCESS_ID]         = @PROCESS_ID         
		   ,[LAST_MESSAGE_ID]    = @LAST_MESSAGE_ID    
		   ,[QUEUE_COUNT]        = @QUEUE_COUNT        
		   ,[LAST_MESSAGE_DTTM]  = @LAST_MESSAGE_DTTM
		 WHERE 
			[ID] = @ID;		
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysApplication]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/16/2012
-- Description:	Insert/Update new system application
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysApplication] 
	-- Add the parameters for the stored procedure here
	@NAME varchar(200) = NULL, 
	@DESCRIPTION varchar(200) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @ID = 0
	BEGIN
		-- Insert statements for procedure here
		INSERT INTO [dbo].[SYS_APPLICATION]
			   ([NAME]
			   ,[DESCRIPTION])
		 VALUES
			   (@NAME
			   ,@DESCRIPTION)
		
		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN		
		UPDATE [dbo].[SYS_APPLICATION]
		   SET [NAME] = @NAME
			  ,[DESCRIPTION] = @DESCRIPTION
		 WHERE 
			[ID] = @ID;		
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysApplicationSetting]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/16/2012
-- Description:	Insert/Update new system application setting
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysApplicationSetting] 
	-- Add the parameters for the stored procedure here
	@APPLICATION_ID INT = 0, 
	@COMMUNICATION_ID INT = 0, 
	@DISABLED BIT = 0,
	@AUTOSTART BIT = 0,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @ID = 0
	BEGIN
		-- Insert statements for procedure here
		INSERT INTO [dbo].[SYS_APPLICATION_SETTING]
			   ([APPLICATION_ID]
			   ,[COMMUNICATION_ID]
			   ,[DISABLED]
			   ,[AUTOSTART])
		 VALUES
			   (@APPLICATION_ID
			   ,@COMMUNICATION_ID
			   ,@DISABLED
			   ,@AUTOSTART)
		
		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN		
		UPDATE [dbo].[SYS_APPLICATION_SETTING]
		   SET [APPLICATION_ID] = @APPLICATION_ID
			  ,[COMMUNICATION_ID] = @COMMUNICATION_ID
			  ,[DISABLED] = @DISABLED
			  ,[AUTOSTART] = @AUTOSTART
		 WHERE 
			[ID] = @ID;		
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysColumnSet]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		CHRISTOPHER BARTHOLOMEW
-- Create date: 02/17/2014
-- Description:	INSERT / UPDATE INTO COUMN SET
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysColumnSet] 
	-- Add the parameters for the stored procedure here
	@DATABASE_TABLE_ID BIGINT = 0,
	@NAME VARCHAR(200) = NULL,
	@MESSAGE_GROUP_INSTANCE_ID BIGINT = 0, 
	@IS_PRIMARY_KEY BIT = 0,
	@COLUMN_DATA_TYPE NVARCHAR(50) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	-- HANDLE EMPTY FK RELATIONSHIPS 
	IF @DATABASE_TABLE_ID = 0
		SET @DATABASE_TABLE_ID = NULL;
	
	IF @MESSAGE_GROUP_INSTANCE_ID = 0
		SET @MESSAGE_GROUP_INSTANCE_ID = NULL;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_COLUMN_SET]
           ([DATABASE_TABLE_ID]
		   ,[NAME]
		   ,[MESSAGE_GROUP_INSTANCE_ID]
           ,[IS_PRIMARY_KEY]
		   ,[COLUMN_DATA_TYPE])
		VALUES
           (@DATABASE_TABLE_ID
		   ,@NAME
		   ,@MESSAGE_GROUP_INSTANCE_ID
           ,@IS_PRIMARY_KEY
		   ,@COLUMN_DATA_TYPE)

		   SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_COLUMN_SET]
		SET [DATABASE_TABLE_ID] = @DATABASE_TABLE_ID,
		[NAME] = @NAME,
		[MESSAGE_GROUP_INSTANCE_ID] = @MESSAGE_GROUP_INSTANCE_ID
		,[IS_PRIMARY_KEY] = @IS_PRIMARY_KEY
		,[COLUMN_DATA_TYPE] = @COLUMN_DATA_TYPE
		WHERE ID = @ID
	END 

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCommunication]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/18/2014
-- Description:	insert/update SYS_COMMUNICATION
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCommunication] 
	-- Add the parameters for the stored procedure here
	@DIRECTION_TYPE_ID bigint = 0,
	@COMMUNICATION_TYPE_ID bigint = 0, 
	@APPLICATION_ID bigint = 0,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @DIRECTION_TYPE_ID = 0
		SET @DIRECTION_TYPE_ID = NULL;
	IF @COMMUNICATION_TYPE_ID = 0
		SET @COMMUNICATION_TYPE_ID = NULL;
	IF @APPLICATION_ID = 0
		SET @APPLICATION_ID = NULL;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_COMMUNICATION]
				([DIRECTION_TYPE_ID]
				,[COMMUNICATION_TYPE_ID]
				,[APPLICATION_ID])
			VALUES
				(@DIRECTION_TYPE_ID
				,@COMMUNICATION_TYPE_ID
				,@APPLICATION_ID)
		
		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN

		IF @DIRECTION_TYPE_ID	  = 0
			SET @DIRECTION_TYPE_ID = NULL;
		IF @COMMUNICATION_TYPE_ID = 0 
			SET @COMMUNICATION_TYPE_ID = NULL;
		IF @APPLICATION_ID		  = 0
			SET @APPLICATION_ID = NULL;

		UPDATE [dbo].[SYS_COMMUNICATION]
		   SET [DIRECTION_TYPE_ID] = @DIRECTION_TYPE_ID
			  ,[COMMUNICATION_TYPE_ID] = @COMMUNICATION_TYPE_ID
			  ,[APPLICATION_ID] = @APPLICATION_ID
		 WHERE [ID] = @ID		
	END
	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCommunicationType]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02-18-2014
-- Description:	Insert/Update sys Communication type
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCommunicationType] 
	-- Add the parameters for the stored procedure here
	@NAME NVARCHAR(50) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_COMMUNICATION_TYPE]
				   ([NAME])
			 VALUES
				   (@NAME)

		 SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_COMMUNICATION_TYPE]
		SET [NAME] = @NAME
		WHERE [ID] = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCredential]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/17/2014
-- Description:	Insert/Update into Credential
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCredential] 
	-- Add the parameters for the stored procedure here
	@CREDENTIAL_TYPE_ID bigint = 0, 
	@USERNAME VARCHAR(250) = NULL,
	@PASSWORD VARCHAR(250) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @CREDENTIAL_TYPE_ID = 0
		SET @CREDENTIAL_TYPE_ID = NULL;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_CREDENTIAL]
				   ([CREDENTIAL_TYPE_ID]
				   ,[USERNAME]
				   ,[PASSWORD])
			 VALUES
				   (@CREDENTIAL_TYPE_ID
				   ,@USERNAME
				   ,@PASSWORD)

			SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_CREDENTIAL]
		   SET [CREDENTIAL_TYPE_ID] = @CREDENTIAL_TYPE_ID
			  ,[USERNAME] = @USERNAME
			  ,[PASSWORD] = @PASSWORD
		 WHERE ID = @ID
	 END
	
	 SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCredentialType]...';


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/17/2014
-- Description:	Insert/Update into Credential TYPE
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysCredentialType] 
	-- Add the parameters for the stored procedure here
	@NAME VARCHAR(250) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_CREDENTIAL_TYPE]
				   ([NAME])
			 VALUES
				   (@NAME)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_CREDENTIAL_TYPE]
		   SET [NAME] = @NAME		
		 WHERE ID = @ID
	 END

	 SELECT @ID AS ID;
END
GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseInstance]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/17/2014
-- Description:	Insert/Update into DATABASE INSTANCE
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseInstance] 
	-- Add the parameters for the stored procedure here
	@COMMUNICATION_ID BIGINT = NULL,
	@CREDENTIAL_ID BIGINT = 0, 
	@NAME VARCHAR(250) = NULL,
	@SERVER VARCHAR(250) = NULL,
	@IP_ADDRESS VARCHAR(250) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @COMMUNICATION_ID = 0
		SET @COMMUNICATION_ID = NULL;
	IF @CREDENTIAL_ID = 0 
		SET @CREDENTIAL_ID = NULL;

	-- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_DATABASE_INSTANCE]
				   ([COMMUNICATION_ID],
				   [CREDENTIAL_ID],
				   [NAME],
				   [SERVER],
				   [IP_ADDRESS])
			 VALUES
				   (@COMMUNICATION_ID,
				    @CREDENTIAL_ID,
					@NAME,
					@SERVER,
					@IP_ADDRESS)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_DATABASE_INSTANCE]
		   SET	[COMMUNICATION_ID] = @COMMUNICATION_ID,
				[CREDENTIAL_ID] = @CREDENTIAL_ID,
				[NAME] = @NAME,
				[SERVER] = @SERVER,
				[IP_ADDRESS] = @IP_ADDRESS
		 WHERE ID = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseTable]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/17/2014
-- Description:	Insert/Update into Credential
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseTable] 
	-- Add the parameters for the stored procedure here
	@DATABASE_INSTANCE_ID bigint = 0, 
	@NAME VARCHAR(250) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @DATABASE_INSTANCE_ID = 0
		SET @DATABASE_INSTANCE_ID = NULL;

	-- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_DATABASE_TABLE]
				   ([DATABASE_INSTANCE_ID],
				   [NAME])
			 VALUES
				   (@DATABASE_INSTANCE_ID,
					@NAME)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_DATABASE_TABLE]
		   SET	DATABASE_INSTANCE_ID = @DATABASE_INSTANCE_ID,
				NAME = @NAME
		 WHERE ID = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseTableRelation]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO

-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/17/2014
-- Description:	Insert/Update into database table relation
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseTableRelation] 
	-- Add the parameters for the stored procedure here
	@SOURCE_DATABASE_TABLE_ID bigint = 0, 
	@TARGET_DATABASE_TABLE_ID bigint = 0, 
	@REQUIRES_IDENTITY bit = 0,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @SOURCE_DATABASE_TABLE_ID = 0
		SET @SOURCE_DATABASE_TABLE_ID = NULL;

	IF @TARGET_DATABASE_TABLE_ID = 0
		SET @TARGET_DATABASE_TABLE_ID = NULL;

	-- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_DATABASE_TABLE_RELATION]
				   ([SOURCE_DATABASE_TABLE_ID],
				   [TARGET_DATABASE_TABLE_ID],
				    [REQUIRES_IDENTITY])
			 VALUES
				   (@SOURCE_DATABASE_TABLE_ID,
					@TARGET_DATABASE_TABLE_ID,
					@REQUIRES_IDENTITY)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_DATABASE_TABLE_RELATION]
		   SET	[SOURCE_DATABASE_TABLE_ID] = @SOURCE_DATABASE_TABLE_ID,
				[TARGET_DATABASE_TABLE_ID] = @TARGET_DATABASE_TABLE_ID,
				[REQUIRES_IDENTITY] = @REQUIRES_IDENTITY
		 WHERE ID = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDirectionType]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02-18-2014
-- Description:	Insert/Update sys direction type
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysDirectionType] 
	-- Add the parameters for the stored procedure here
	@NAME NVARCHAR(50) = NULL, 
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_DIRECTION_TYPE]
				   ([NAME])
			 VALUES
				   (@NAME)

		 SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_DIRECTION_TYPE]
		SET [NAME] = @NAME
		WHERE [ID] = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysInterface]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/18/2014
-- Description:	Insert/Update into sys interface
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysInterface] 
	-- Add the parameters for the stored procedure here
	@COMMUNICATION_ID bigint = 0,
	@CREDENTIAL_ID bigint = 0, 
	@IP_ADDRESS NVARCHAR(200),
	@PORT NVARCHAR(10) = 0,
	@MAX_CONNECTIONS bigint = 0,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @COMMUNICATION_ID = 0
		SET @COMMUNICATION_ID = NULL;
	IF @CREDENTIAL_ID = 0
		SET @CREDENTIAL_ID = NULL;


    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_INTERFACE]
				([COMMUNICATION_ID]
				,[CREDENTIAL_ID]
				,[IP_ADDRESS]
				,[PORT]
				,[MAX_CONNECTIONS])
			VALUES
				(@COMMUNICATION_ID
				,@CREDENTIAL_ID
				,@IP_ADDRESS
				,@PORT
				,@MAX_CONNECTIONS)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_INTERFACE]
		   SET [COMMUNICATION_ID] = @COMMUNICATION_ID 
			  ,[CREDENTIAL_ID] = @CREDENTIAL_ID
			  ,[IP_ADDRESS] = @IP_ADDRESS
			  ,[PORT] = @PORT
			  ,[MAX_CONNECTIONS] = @MAX_CONNECTIONS
		 WHERE ID = @ID		 
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageGroup]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/18/2014
-- Description:	insert/update SYS_MESSAGE_GROUP
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageGroup] 
	-- Add the parameters for the stored procedure here
	@MESSAGE_GROUP_INSTANCE_ID bigint = 0,
	@MESSAGE_PART_ID int = 0, 
	@POSITION NVARCHAR(100) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @MESSAGE_GROUP_INSTANCE_ID = 0
		SET @MESSAGE_GROUP_INSTANCE_ID = NULL;
	IF @MESSAGE_PART_ID = 0
		SET @MESSAGE_PART_ID = NULL;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_MESSAGE_GROUP]
				([MESSAGE_GROUP_INSTANCE_ID]
				,[MESSAGE_PART_ID]
				,[POSITION])
			VALUES
				(@MESSAGE_GROUP_INSTANCE_ID
				,@MESSAGE_PART_ID
				,@POSITION)
		
		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_MESSAGE_GROUP]
		   SET [MESSAGE_GROUP_INSTANCE_ID] = @MESSAGE_GROUP_INSTANCE_ID
			  ,[MESSAGE_PART_ID] = @MESSAGE_PART_ID
			  ,[POSITION] = @POSITION
		 WHERE [ID] = @ID		
	END
	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageGroupInstance]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/18/2014
-- Description:	insert/update message group instance
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageGroupInstance] 
	-- Add the parameters for the stored procedure here
	@MESSAGE_TYPE_ID bigint = 0, 
	@SEGMENT_TYPE_ID bigint = 0,
	@DESCRIPTION NVARCHAR(255) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	DECLARE @UPDATED_DTTM AS DATETIME;
	SELECT @UPDATED_DTTM=GETDATE();

	IF @MESSAGE_TYPE_ID = 0
		SET @MESSAGE_TYPE_ID = NULL;
	IF @SEGMENT_TYPE_ID = 0
		SET @SEGMENT_TYPE_ID = NULL;


    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		-- GET CREATED DATE
		DECLARE @CREATED_DTTM AS DATETIME;		
		SELECT @CREATED_DTTM=GETDATE();

		INSERT INTO [dbo].[SYS_MESSAGE_GROUP_INSTANCE]
				   ([MESSAGE_TYPE_ID]
				   ,[SEGMENT_TYPE_ID]
				   ,[CREATED_DTTM]
				   ,[UPDATED_DTTM]
				   ,[DESCRIPTION])
			 VALUES
				   (@MESSAGE_TYPE_ID
				   ,@SEGMENT_TYPE_ID
				   ,@CREATED_DTTM
				   ,@UPDATED_DTTM
				   ,@DESCRIPTION)
		
		SELECT @ID=SCOPE_IDENTITY();

	END
	ELSE
	BEGIN
		-- DON'T UPDATE CREATED DATE
		UPDATE [dbo].[SYS_MESSAGE_GROUP_INSTANCE]
		   SET [MESSAGE_TYPE_ID] = @MESSAGE_TYPE_ID
			  ,[SEGMENT_TYPE_ID] = @SEGMENT_TYPE_ID
			  ,[UPDATED_DTTM] = @UPDATED_DTTM
			  ,[DESCRIPTION] = @DESCRIPTION
		 WHERE [ID] = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessagePart]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02-18-2014
-- Description:	Insert/Update sys message part value
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessagePart] 
	-- Add the parameters for the stored procedure here
	@NAME NVARCHAR(100) = NULL, 
	@DELIMITER CHAR(10) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_MESSAGE_PART]
				   ([NAME]
				   ,[DELIMITER])
			 VALUES
				   (@NAME
				   ,@DELIMITER)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_MESSAGE_PART]
		   SET [NAME] = @NAME
			  ,[DELIMITER] = @DELIMITER
		 WHERE ID = @ID	
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageType]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02-18-2014
-- Description:	Insert/Update sys message type
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageType] 
	-- Add the parameters for the stored procedure here
	@NAME nvarchar(200)= null, 
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_MESSAGE_TYPE]
				   ([NAME])
			 VALUES
				   (@NAME)

		 SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_MESSAGE_TYPE]
		SET [NAME] = @NAME
		WHERE [ID] = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysSegmentType]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/18/2014
-- Description:	Insert/Update sys segment type
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysSegmentType] 
	-- Add the parameters for the stored procedure here
	@NAME VARCHAR(200) = NULL, 
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_SEGMENT_TYPE]
				   ([NAME])
			 VALUES
				   (@NAME)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_SEGMENT_TYPE]
		   SET [NAME] = @NAME
		 WHERE [ID] = @ID
	END	

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebServiceInstance]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO

-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/17/2014
-- Description:	Insert/Update into Webservice Instance
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebServiceInstance] 
	-- Add the parameters for the stored procedure here
	@COMMUNICATION_ID BIGINT = NULL,
	@CREDENTIAL_ID BIGINT = 0, 
	@NAME VARCHAR(250) = NULL,
	@SERVER VARCHAR(250) = NULL,
	@IP_ADDRESS VARCHAR(250) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @COMMUNICATION_ID = 0
		SET @COMMUNICATION_ID = NULL;
	IF @CREDENTIAL_ID = 0 
		SET @CREDENTIAL_ID = NULL;

	-- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_WEBSERVICE_INSTANCE]
				   ([COMMUNICATION_ID],
				   [CREDENTIAL_ID],
				   [NAME],
				   [SERVER],
				   [IP_ADDRESS])
			 VALUES
				   (@COMMUNICATION_ID,
				    @CREDENTIAL_ID,
					@NAME,
					@SERVER,
					@IP_ADDRESS)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_WEBSERVICE_INSTANCE]
		   SET	[COMMUNICATION_ID] = @COMMUNICATION_ID,
				[CREDENTIAL_ID] = @CREDENTIAL_ID,
				[NAME] = @NAME,
				[SERVER] = @SERVER,
				[IP_ADDRESS] = @IP_ADDRESS
		 WHERE ID = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceObject]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO

-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 02/17/2014
-- Description:	Insert/Update into Webservice Object
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceObject] 
	-- Add the parameters for the stored procedure here
	@WEBSERVICE_INSTANCE_ID bigint = 0, 
	@NAME VARCHAR(250) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @WEBSERVICE_INSTANCE_ID = 0
		SET @WEBSERVICE_INSTANCE_ID = NULL;

	-- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_WEBSERVICE_OBJECT]
				   ([WEBSERVICE_INSTANCE_ID],
				   [NAME])
			 VALUES
				   (@WEBSERVICE_INSTANCE_ID,
					@NAME)

		SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_WEBSERVICE_OBJECT]
		   SET	WEBSERVICE_INSTANCE_ID = @WEBSERVICE_INSTANCE_ID,
				NAME = @NAME
		 WHERE ID = @ID
	END

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceProperty]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO

-- =============================================
-- Author:		CHRISTOPHER BARTHOLOMEW
-- Create date: 02/17/2014
-- Description:	INSERT / UPDATE INTO WEB SERVICE PROPERTY SET
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceProperty] 
	-- Add the parameters for the stored procedure here
	@WEBSERVICE_OBJECT_ID BIGINT = 0,
	@NAME VARCHAR(200) = NULL,
	@MESSAGE_GROUP_INSTANCE_ID BIGINT = 0, 
	@COLUMN_DATA_TYPE NVARCHAR(50) = NULL,
	@ID bigint = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	-- HANDLE EMPTY FK RELATIONSHIPS 
	IF @WEBSERVICE_OBJECT_ID = 0
		SET @WEBSERVICE_OBJECT_ID = NULL;
	
	IF @MESSAGE_GROUP_INSTANCE_ID = 0
		SET @MESSAGE_GROUP_INSTANCE_ID = NULL;

    -- Insert statements for procedure here
	IF @ID = 0
	BEGIN
		INSERT INTO [dbo].[SYS_WEBSERVICE_PROPERTY_SET]
           ([WEBSERVICE_OBJECT_ID]
		   ,[NAME]
		   ,[MESSAGE_GROUP_INSTANCE_ID]
		   ,[COLUMN_DATA_TYPE])
		VALUES
           (@WEBSERVICE_OBJECT_ID
		   ,@NAME
		   ,@MESSAGE_GROUP_INSTANCE_ID
		   ,@COLUMN_DATA_TYPE)

		   SELECT @ID=SCOPE_IDENTITY();
	END
	ELSE
	BEGIN
		UPDATE [dbo].[SYS_WEBSERVICE_PROPERTY_SET]
		SET [WEBSERVICE_OBJECT_ID] = @WEBSERVICE_OBJECT_ID
		,[NAME] = @NAME
		,[MESSAGE_GROUP_INSTANCE_ID] = @MESSAGE_GROUP_INSTANCE_ID
		,[COLUMN_DATA_TYPE] = @COLUMN_DATA_TYPE
		WHERE ID = @ID
	END 

	SELECT @ID AS ID;
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_ResendReportFromSectraRIS]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Bartholomew, Christopher
-- Create date: 04/28/2014
-- Description:	Update
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_ResendReportFromSectraRIS]
	-- Add the parameters for the stored procedure here
	@ACCESSION_NO NVARCHAR(50) = NULL
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	IF @ACCESSION_NO IS NULL
	BEGIN
		-- Insert statements for procedure here
		DECLARE @EID NVARCHAR(50)
		DECLARE REFILE_CURSOR CURSOR FORWARD_ONLY FOR

		SELECT e.accession_no as accession
		from [172.31.100.176].[ris_db_test].[dbo].reports as r 
		right outer join [172.31.100.176].[ris_db_test].[dbo].exams as e
		on e.EXAM_ID = r.EXAM_ID
		right outer  join [172.31.100.176].[ris_db_test].[dbo].patients as p
		on p.PATIENT_ID = e.PATIENT_ID
		where e.exam_status_id = 4
		and report_id is null

		OPEN REFILE_CURSOR

		FETCH NEXT FROM REFILE_CURSOR
		INTO @EID

		WHILE @@FETCH_STATUS = 0
		BEGIN
			DECLARE @MCID AS NVARCHAR(50);

			select @MCID=messageid from [shcsctdb].[rlogic].[rlogic].hl7event with (nolock)
			where 
			examid = (select examid from [shcsctdb].[rlogic].[rlogic].exams where accession_no = @EID)
			and eventtype = 'OUF'
			and [partner] = 'General'

			IF @MCID != ''
			BEGIN
				-- This will re-send missing message 
				update [shcsctdb].[rlogic].[rlogic].messagequeue 
				set [status] = 'A' 
				where messageId = @MCID
			END
		FETCH NEXT FROM REFILE_CURSOR
		INTO @EID

		END

		CLOSE REFILE_CURSOR
		DEALLOCATE REFILE_CURSOR
	END
	ELSE
	BEGIN
			DECLARE @MC AS NVARCHAR(50);
			select @MC=messageid from [shcsctdb].[rlogic].[rlogic].hl7event with (nolock)
			where 
			examid = (select examid from [shcsctdb].[rlogic].[rlogic].exams where accession_no = @ACCESSION_NO)
			and eventtype = 'OUF'
			and [partner] = 'General'

			IF @MCID != ''
			BEGIN
				-- This will re-send missing message 
				update [shcsctdb].[rlogic].[rlogic].messagequeue 
				set [status] = 'A' 
				where messageId = @MC
			END
	END 
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [DBO].[Shields_HL7Broker_UpdateAppBrokerInterfaceStatus]...';


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 05/28/2014
-- Description:	Updates Interface Status Only
-- =============================================
CREATE PROCEDURE [DBO].[Shields_HL7Broker_UpdateAppBrokerInterfaceStatus]
	-- Add the parameters for the stored procedure here
	@INTERFACE_STATUS_ID int = 0, 
	@ID int = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	UPDATE APP_BROKER SET 
	INTERFACE_STATUS_ID = @INTERFACE_STATUS_ID 
	WHERE [ID] = @ID;

END
GO
PRINT N'Creating [dbo].[Shields_HL7Broker_UpdateAppBrokerLastMessageStats]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 05/24/2014
-- Description:	Updates the message and queue count for the main worklist
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_UpdateAppBrokerLastMessageStats] 
	-- Add the parameters for the stored procedure here
	@LAST_MESSAGE_ID int = 0, 
	@LAST_MESSAGE_DTTM NVARCHAR(50) = NULL,
	@QUEUE_COUNT int = -1,
	@ID int = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	SELECT @QUEUE_COUNT=COUNT(MHI_ID)
	FROM [dbo].[vShieldsHL7Broker_GetMessageHeaderInstances] (nolock)
	WHERE MHI_PROCESSED = 0
	
    -- Insert statements for procedure here
	UPDATE APP_BROKER SET 
	LAST_MESSAGE_ID = @LAST_MESSAGE_ID, 
	LAST_MESSAGE_DTTM = Convert(datetime,@LAST_MESSAGE_DTTM,121), 
	QUEUE_COUNT = @QUEUE_COUNT 
	WHERE [ID] = @ID

END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_UpdateAppBrokerProcessIdentity]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Christopher Bartholomew
-- Create date: 05/28/2014
-- Description:	
-- =============================================
CREATE PROCEDURE Shields_HL7Broker_UpdateAppBrokerProcessIdentity 
	-- Add the parameters for the stored procedure here
	@PROCESS_ID int = 0, 
	@ID int = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;

	UPDATE APP_BROKER SET 
	PROCESS_ID = @PROCESS_ID 
	WHERE [ID] = @ID
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_UpdateAppMessageHeaderInstanceForReProcess]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO

-- =============================================
-- Author:		Bartholomew, Christopher
-- Create date: 04/16/2014
-- Description:	Updates the processed flag
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_UpdateAppMessageHeaderInstanceForReProcess] 
	-- Add the parameters for the stored procedure here
	@ID INT = 0,
	@MESSAGE_CONTROL_ID NVARCHAR(50) = NULL
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
	DECLARE @IS_PROCESSED AS BIT = 'false'
	DECLARE @RETURNTHIS AS NVARCHAR(50);

	IF @ID = 0
		BEGIN
			IF @MESSAGE_CONTROL_ID IS NULL
				BEGIN
					SET @ID = -1
					SET @RETURNTHIS  = 0
				END
			ELSE
				BEGIN
					BEGIN TRY
						--UPDATE MESSAGE HEADER INSTANCE BY REGULAR ID
						UPDATE [dbo].[APP_MESSAGE_HEADER_INSTANCE] 
						SET 
						PROCESSED			   = @IS_PROCESSED,
						PENDING_REPROCESS_DTTM = GETDATE()
						WHERE [MESSAGE_CONTROL_ID]= @MESSAGE_CONTROL_ID

						SET @RETURNTHIS  = @MESSAGE_CONTROL_ID
					END TRY
					BEGIN CATCH
						SET @ID = -1
						SET @RETURNTHIS  = 0
					END CATCH
				END
		END
	ELSE
		BEGIN
			BEGIN TRY
				--UPDATE MESSAGE HEADER INSTANCE BY REGULAR ID
				UPDATE [dbo].[APP_MESSAGE_HEADER_INSTANCE] 
				SET 
				PROCESSED			   = @IS_PROCESSED,
				PENDING_REPROCESS_DTTM = GETDATE()
				WHERE [ID]			   = @ID

				SET @RETURNTHIS  = @ID
		END TRY
			BEGIN CATCH
				SET @ID = -1
				SET @RETURNTHIS  = 0
			END CATCH
		END	
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Shields_HL7Broker_UpdateAppMessageHeaderInstanceToProcessed]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
-- =============================================
-- Author:		Bartholomew, Christopher
-- Create date: 04/16/2014
-- Description:	Updates the processed flag
-- =============================================
CREATE PROCEDURE [dbo].[Shields_HL7Broker_UpdateAppMessageHeaderInstanceToProcessed] 
	-- Add the parameters for the stored procedure here
	@ID INT = 0,
	@MESSAGE_ID INT = 0,
	@ISREPROCESS BIT = 0
AS
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
	-- SET UP CONSTANTS	
	DECLARE @REPROCESS		AS INT = 2;
	DECLARE @ERRORED		AS INT = 3;
	DECLARE @UNKNOWN		AS INT = 4;
	DECLARE @APP_PROCESS	AS INT = 5;

	-- SET PROCESSED FLAGS
	DECLARE @IS_PROCESSED AS BIT;
	DECLARE @MESSAGE_LOG_TYPE AS INT;
	DECLARE @CURRENT_DTTM AS DATETIME;
	
	SET @IS_PROCESSED	  = 'true';
	SET @MESSAGE_LOG_TYPE = @UNKNOWN;
	SET @CURRENT_DTTM	  = GETDATE();

	IF @ID = 0
		BEGIN
			SET @ID = -1
		END
	ELSE
		BEGIN
			BEGIN TRY
				--UPDATE MESSAGE HEADER INSTANCE
				UPDATE [dbo].[APP_MESSAGE_HEADER_INSTANCE] 
				SET 
				PROCESSED_COUNT = PROCESSED_COUNT + 1, 
				PROCESSED_DTTM  = @CURRENT_DTTM,
				PROCESSED		= @IS_PROCESSED,
				PENDING_REPROCESS_DTTM = NULL
				WHERE [ID]		= @ID

				IF @ISREPROCESS = 0
					BEGIN
						SET @MESSAGE_LOG_TYPE = @APP_PROCESS;
					END
				ELSE
					BEGIN
						SET @MESSAGE_LOG_TYPE = @REPROCESS;
					END
		END TRY
			BEGIN CATCH
				SET @IS_PROCESSED		= 'false';
				SET @MESSAGE_LOG_TYPE	= @ERRORED;
			END CATCH
		END	

	--CREATE TEMP TABLE TO HOLD RESULTS
	DECLARE @TEMP_VALUE TABLE (ID INT, MESSAGE_ID INT, MESSAGE_LOG_TYPE_ID INT, CREATED_DTTM DATETIME)
	
	--UPDATE MESSAGE LOG TO REFLECT THIS IF THE ID IS NOT ZERO
	INSERT INTO @TEMP_VALUE	
	EXEC [dbo].[Shields_HL7Broker_InsertIntoAppMessageLog]@MESSAGE_ID,@MESSAGE_LOG_TYPE,@CURRENT_DTTM;
	
	--RETURN THE ID TO THROW AN ERROR
	SELECT @ID AS [ID]
END
GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating Permission...';


GO
GRANT CONNECT TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT CONNECT TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoAppAcknowledgement] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoAppMessageLog] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateAppBroker] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysApplication] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysApplicationSetting] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysColumnSet] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysCommunication] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysCommunicationType] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysCredential] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseInstance] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseTable] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysDatabaseTableRelation] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysDirectionType] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysInterface] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageGroup] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageGroupInstance] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessagePart] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysMessageType] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebServiceInstance] TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebServiceInstance] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceObject] TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceObject] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceProperty] TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_InsertIntoUpdateSysWebserviceProperty] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_ResendReportFromSectraRIS] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[DBO].[Shields_HL7Broker_UpdateAppBrokerInterfaceStatus] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[DBO].[Shields_HL7Broker_UpdateAppBrokerInterfaceStatus] TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_UpdateAppBrokerLastMessageStats] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_UpdateAppBrokerProcessIdentity] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_UpdateAppMessageHeaderInstanceForReProcess] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT EXECUTE
    ON OBJECT::[dbo].[Shields_HL7Broker_UpdateAppMessageHeaderInstanceToProcessed] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetAppBrokerMainList] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetApplicationDatabasesConfig] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetApplicationInterfaceConfig] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetApplicationWebserviceConfig] TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetApplicationWebserviceConfig] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetDatabaseColumns] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetDatabaseTables] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetMessageHeaderInstances] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetMessagePosition] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetWebserviceObjectProperties] TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetWebserviceObjectProperties] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetWebseviceObjects] TO [InterfaceBrokerUser]
    AS [dbo];


GO
PRINT N'Creating Permission...';


GO
GRANT SELECT
    ON OBJECT::[dbo].[vShieldsHL7Broker_GetWebseviceObjects] TO [ReadingRadPooledUser]
    AS [dbo];


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetAppBrokerMainList].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetAppBrokerMainList';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetAppBrokerMainList].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 2880
         Alias = 2520
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetAppBrokerMainList';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetAppBrokerMainList].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "B"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 135
               Right = 250
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 6
               Left = 288
               Bottom = 135
               Right = 528
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CT"
            Begin Extent = 
               Top = 6
               Left = 566
               Bottom = 101
               Right = 736
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 774
               Bottom = 118
               Right = 944
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DT"
            Begin Extent = 
               Top = 102
               Left = 566
               Bottom = 197
               Right = 736
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "S"
            Begin Extent = 
               Top = 120
               Left = 774
               Bottom = 232
               Right = 949
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "M"
            Begin Extent = 
               Top = 138
               Left = 38
               Bottom = 250
               Right = 304
            End
            DisplayFlags = 280
            TopColumn = 0
         End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetAppBrokerMainList';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationConfiguration].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationConfiguration';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationConfiguration].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "C"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 135
               Right = 486
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CT"
            Begin Extent = 
               Top = 6
               Left = 524
               Bottom = 101
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DT"
            Begin Extent = 
               Top = 102
               Left = 524
               Bottom = 197
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "S"
            Begin Extent = 
               Top = 120
               Left = 38
               Bottom = 249
               Right = 246
            End
            DisplayFlags = 280
            TopColumn = 1
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationConfiguration';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationConfiguration].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N' = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationConfiguration';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationDatabasesConfig].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = -96
         Left = 0
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 138
               Left = 38
               Bottom = 267
               Right = 278
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DI"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 135
               Right = 426
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "C"
            Begin Extent = 
               Top = 6
               Left = 464
               Bottom = 135
               Right = 669
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CT"
            Begin Extent = 
               Top = 6
               Left = 707
               Bottom = 101
               Right = 877
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "COT"
            Begin Extent = 
               Top = 138
               Left = 316
               Bottom = 233
               Right = 486
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DT"
            Begin Extent = 
               Top = 138
               Left = 524
               Bottom = 233
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         ', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationDatabasesConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationDatabasesConfig].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'End
         Begin Table = "S"
            Begin Extent = 
               Top = 234
               Left = 316
               Bottom = 363
               Right = 524
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 10
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 2160
         Alias = 2820
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationDatabasesConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationDatabasesConfig].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationDatabasesConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationInterfaceConfig].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = -96
         Left = 0
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 138
               Left = 38
               Bottom = 267
               Right = 278
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "I"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 135
               Right = 449
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "C"
            Begin Extent = 
               Top = 6
               Left = 487
               Bottom = 135
               Right = 692
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CT"
            Begin Extent = 
               Top = 6
               Left = 730
               Bottom = 101
               Right = 900
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "COT"
            Begin Extent = 
               Top = 138
               Left = 316
               Bottom = 233
               Right = 486
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DT"
            Begin Extent = 
               Top = 138
               Left = 524
               Bottom = 233
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         E', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationInterfaceConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationInterfaceConfig].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'nd
         Begin Table = "S"
            Begin Extent = 
               Top = 234
               Left = 316
               Bottom = 363
               Right = 524
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 10
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 3015
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationInterfaceConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationInterfaceConfig].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationInterfaceConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationWebserviceConfig].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationWebserviceConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationWebserviceConfig].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'End
         Begin Table = "S"
            Begin Extent = 
               Top = 234
               Left = 489
               Bottom = 363
               Right = 697
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationWebserviceConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetApplicationWebserviceConfig].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 135
               Right = 486
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "WI"
            Begin Extent = 
               Top = 6
               Left = 524
               Bottom = 135
               Right = 732
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "C"
            Begin Extent = 
               Top = 120
               Left = 38
               Bottom = 249
               Right = 243
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CT"
            Begin Extent = 
               Top = 138
               Left = 281
               Bottom = 233
               Right = 451
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "COT"
            Begin Extent = 
               Top = 138
               Left = 489
               Bottom = 233
               Right = 659
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DT"
            Begin Extent = 
               Top = 234
               Left = 281
               Bottom = 329
               Right = 451
            End
            DisplayFlags = 280
            TopColumn = 0
         ', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetApplicationWebserviceConfig';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseColumns].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = -96
         Left = -693
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 126
               Left = 464
               Bottom = 255
               Right = 704
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "COT"
            Begin Extent = 
               Top = 120
               Left = 38
               Bottom = 215
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DIR"
            Begin Extent = 
               Top = 132
               Left = 246
               Bottom = 227
               Right = 416
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DI"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 129
               Right = 426
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DT"
            Begin Extent = 
               Top = 6
               Left = 464
               Bottom = 126
               Right = 688
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CS"
            Begin Extent = 
               Top = 83
               Left = 712
               Bottom = 212
               Right = 973
            End
            DisplayFlags = 280
            TopColumn = 2
   ', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetDatabaseColumns';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseColumns].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'      End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 10
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 3495
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 4485
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetDatabaseColumns';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseColumns].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetDatabaseColumns';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseTables].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[41] 4[20] 2[24] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 120
               Left = 464
               Bottom = 249
               Right = 704
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "COT"
            Begin Extent = 
               Top = 120
               Left = 38
               Bottom = 215
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DIR"
            Begin Extent = 
               Top = 138
               Left = 246
               Bottom = 233
               Right = 416
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DI"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 135
               Right = 426
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DT"
            Begin Extent = 
               Top = 6
               Left = 464
               Bottom = 118
               Right = 688
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DTR"
            Begin Extent = 
               Top = 234
               Left = 38
               Bottom = 363
               Right = 289
            End
            DisplayFlags = 280
            TopColumn = 0
       ', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetDatabaseTables';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseTables].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'  End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetDatabaseTables';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetDatabaseTables].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetDatabaseTables';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetMessageHeaderInstances].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 1, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetMessageHeaderInstances';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetMessageHeaderInstances].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[25] 4[36] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "MHI"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 135
               Right = 264
            End
            DisplayFlags = 280
            TopColumn = 14
         End
         Begin Table = "M"
            Begin Extent = 
               Top = 6
               Left = 302
               Bottom = 118
               Right = 568
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 2460
         Alias = 2580
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetMessageHeaderInstances';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetMessagePosition].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "MGI"
            Begin Extent = 
               Top = 17
               Left = 19
               Bottom = 146
               Right = 209
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "ST"
            Begin Extent = 
               Top = 220
               Left = 254
               Bottom = 315
               Right = 424
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "MT"
            Begin Extent = 
               Top = 99
               Left = 256
               Bottom = 194
               Right = 426
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "MG"
            Begin Extent = 
               Top = 0
               Left = 678
               Bottom = 129
               Right = 939
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "MP"
            Begin Extent = 
               Top = 92
               Left = 453
               Bottom = 204
               Right = 623
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 2400
         Width = 1500
         Width = 2640
         Width = 1935
         Width = 2160
         Width = 3885
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 4455
         Table = 1170
        ', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetMessagePosition';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetMessagePosition].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N' Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetMessagePosition';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetMessagePosition].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetMessagePosition';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebserviceObjectProperties].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetWebserviceObjectProperties';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebserviceObjectProperties].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'  End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetWebserviceObjectProperties';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebserviceObjectProperties].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 135
               Right = 486
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "COT"
            Begin Extent = 
               Top = 6
               Left = 524
               Bottom = 101
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DIR"
            Begin Extent = 
               Top = 102
               Left = 524
               Bottom = 197
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "WI"
            Begin Extent = 
               Top = 120
               Left = 38
               Bottom = 249
               Right = 246
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "WO"
            Begin Extent = 
               Top = 138
               Left = 284
               Bottom = 250
               Right = 517
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "WP"
            Begin Extent = 
               Top = 198
               Left = 555
               Bottom = 327
               Right = 816
            End
            DisplayFlags = 280
            TopColumn = 0
       ', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetWebserviceObjectProperties';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebseviceObjects].[MS_DiagramPaneCount]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPaneCount', @value = 2, @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetWebseviceObjects';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebseviceObjects].[MS_DiagramPane2]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane2', @value = N'h = 1500
         Width = 1500
         Width = 1500
         Width = 1500
         Width = 1500
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetWebseviceObjects';


GO
PRINT N'Creating [dbo].[vShieldsHL7Broker_GetWebseviceObjects].[MS_DiagramPane1]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_DiagramPane1', @value = N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "A"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 118
               Right = 208
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "CO"
            Begin Extent = 
               Top = 6
               Left = 246
               Bottom = 135
               Right = 486
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "COT"
            Begin Extent = 
               Top = 6
               Left = 524
               Bottom = 101
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "DIR"
            Begin Extent = 
               Top = 102
               Left = 524
               Bottom = 197
               Right = 694
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "WI"
            Begin Extent = 
               Top = 120
               Left = 38
               Bottom = 249
               Right = 246
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "WO"
            Begin Extent = 
               Top = 138
               Left = 284
               Bottom = 250
               Right = 517
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
      Begin ColumnWidths = 9
         Width = 284
         Width = 1500
         Width = 1500
         Width = 1500
         Widt', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'VIEW', @level1name = N'vShieldsHL7Broker_GetWebseviceObjects';


GO
PRINT N'Checking existing data against newly created constraints';


GO
USE [$(DatabaseName)];


GO
ALTER TABLE [dbo].[APP_MESSAGE] WITH CHECK CHECK CONSTRAINT [FK_APP_MESSAGE_APP_MESSAGE_HEADER_INSTANCE];

ALTER TABLE [dbo].[SYS_COLUMN_SET] WITH CHECK CHECK CONSTRAINT [FK_SYS_COLUMN_SET_SYS_DATABASE_TABLE];

ALTER TABLE [dbo].[SYS_COLUMN_SET] WITH CHECK CHECK CONSTRAINT [FK_SYS_COLUMN_SET_SYS_MESSAGE_GROUP_INSTANCE];

ALTER TABLE [dbo].[SYS_COMMUNICATION] WITH CHECK CHECK CONSTRAINT [FK_SYS_COMMUNICATION_SYS_APPLICATION];

ALTER TABLE [dbo].[SYS_COMMUNICATION] WITH CHECK CHECK CONSTRAINT [FK_SYS_COMMUNICATION_SYS_COMMUNICATION_TYPE];

ALTER TABLE [dbo].[SYS_COMMUNICATION] WITH CHECK CHECK CONSTRAINT [FK_SYS_COMMUNICATION_SYS_DIRECTION_TYPE];

ALTER TABLE [dbo].[SYS_CREDENTIAL] WITH CHECK CHECK CONSTRAINT [FK_SYS_CREDENTIAL_SYS_CREDENTIAL_TYPE];

ALTER TABLE [dbo].[SYS_DATABASE_INSTANCE] WITH CHECK CHECK CONSTRAINT [FK_SYS_DATABASE_INSTANCE_SYS_CREDENTIAL];

ALTER TABLE [dbo].[SYS_DATABASE_TABLE] WITH CHECK CHECK CONSTRAINT [FK_SYS_DATABASE_TABLE_SYS_DATABASE_INSTANCE];

ALTER TABLE [dbo].[SYS_DATABASE_TABLE_RELATION] WITH CHECK CHECK CONSTRAINT [FK_SYS_DATABASE_TABLE_RELATION_SYS_DATABASE_TABLE];

ALTER TABLE [dbo].[SYS_DATABASE_TABLE_RELATION] WITH CHECK CHECK CONSTRAINT [FK_SYS_DATABASE_TABLE_RELATION_SYS_DATABASE_TABLE1];

ALTER TABLE [dbo].[SYS_INTERFACE] WITH CHECK CHECK CONSTRAINT [FK_SYS_INTERFACE_SYS_CREDENTIAL];

ALTER TABLE [dbo].[SYS_MESSAGE_GROUP] WITH CHECK CHECK CONSTRAINT [FK_SYS_MESSAGE_GROUP_SYS_MESSAGE_GROUP_INSTANCE];

ALTER TABLE [dbo].[SYS_MESSAGE_GROUP] WITH CHECK CHECK CONSTRAINT [FK_SYS_MESSAGE_GROUP_SYS_MESSAGE_PART];

ALTER TABLE [dbo].[SYS_MESSAGE_GROUP_INSTANCE] WITH CHECK CHECK CONSTRAINT [FK_SYS_MESSAGE_GROUP_INSTANCE_SYS_MESSAGE_TYPE];

ALTER TABLE [dbo].[SYS_MESSAGE_GROUP_INSTANCE] WITH CHECK CHECK CONSTRAINT [FK_SYS_MESSAGE_GROUP_INSTANCE_SYS_SEGMENT_TYPE];

ALTER TABLE [dbo].[SYS_WEBSERVICE_INSTANCE] WITH CHECK CHECK CONSTRAINT [FK_SYS_WEBSERVICE_INSTANCE_SYS_CREDENTIAL];

ALTER TABLE [dbo].[SYS_WEBSERVICE_OBJECT] WITH CHECK CHECK CONSTRAINT [FK_SYS_WEBSERVICE_OBJECT_SYS_WEBSERVICE_INSTANCE];

ALTER TABLE [dbo].[SYS_WEBSERVICE_PROPERTY_SET] WITH CHECK CHECK CONSTRAINT [FK_SYS_WEBSERVICE_PROPERTY_SET_SYS_MESSAGE_GROUP_INSTANCE];

ALTER TABLE [dbo].[SYS_WEBSERVICE_PROPERTY_SET] WITH CHECK CHECK CONSTRAINT [FK_SYS_WEBSERVICE_PROPERTY_SET_SYS_WEBSERVICE_OBJECT];


GO
PRINT N'Update complete.';


GO
